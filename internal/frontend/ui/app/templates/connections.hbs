<div class="connections-page">
  <div class="page-header-with-controls">
    <h2>Recent Connections</h2>
    <div class="page-size-control">
      <label for="pageSize">Show:</label>
      <select id="pageSize" {{on "change" this.changePageSize}} class="page-size-select" value={{this.pageSize}}>
        {{#each this.pageSizeOptions as |size|}}
          <option value={{size}}>{{size}}</option>
        {{/each}}
      </select>
      <span class="per-page-label">per page</span>
    </div>
  </div>

  <div class="connections-list">
    {{#if this.isLoading}}
      <div class="loading-indicator">
        <p>Loading connections...</p>
      </div>
    {{else if this.connections}}
      <table class="connections-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Time</th>
            <th>Source IP</th>
            <th>Source Port</th>
            <th>Destination</th>
            <th>Container</th>
            <th>Location</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each this.connections as |connection|}}
            <tr>
              <td>{{connection.id}}</td>
              <td>{{connection.created_at}}</td>
              <td>{{connection.source_address}}</td>
              <td>{{connection.source_port}}</td>
              <td>{{connection.destination_address}}:{{connection.destination_port}}</td>
              <td>{{connection.container}}</td>
              <td>
                {{#if connection.latitude}}
                  {{connection.latitude}}, {{connection.longitude}}
                {{else}}
                  -
                {{/if}}
              </td>
              <td>
                <LinkTo @route="connection" @model={{connection.id}} class="view-details-btn">
                  View Details
                </LinkTo>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <div class="pagination-controls">
        <div class="pagination-info">
          Showing {{this.startRecord}} - {{this.endRecord}} of {{this.totalCount}} connections
        </div>
        <div class="pagination-buttons">
          <button
            type="button"
            class="pagination-btn"
            disabled={{this.disablePreviousPage}}
            {{on "click" this.previousPage}}
          >
            Previous
          </button>
          <span class="page-indicator">Page {{this.currentPage}} of {{this.totalPages}}</span>
          <button
            type="button"
            class="pagination-btn"
            disabled={{this.disableNextPage}}
            {{on "click" this.nextPage}}
          >
            Next
          </button>
        </div>
      </div>
    {{else}}
      <p>No connections found.</p>
    {{/if}}
  </div>
</div>
