<div class="connection-detail-page">
  {{#if @model}}
    <div class="detail-header-section">
      <h2>Connection Details - ID {{@model.id}}</h2>
      <LinkTo @route="connections" class="back-link">← Back to Connections</LinkTo>
    </div>

    <div class="detail-sections">
      <div class="detail-card">
        <h3>Connection Information</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="label">ID:</span>
            <span class="value">{{@model.id}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Created At:</span>
            <span class="value">{{@model.created_at}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Source Address:</span>
            <span class="value">{{@model.source_address}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Source Port:</span>
            <span class="value">{{@model.source_port}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Destination Address:</span>
            <span class="value">{{@model.destination_address}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Destination Port:</span>
            <span class="value">{{@model.destination_port}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Container:</span>
            <span class="value">{{@model.container}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Protocol:</span>
            <span class="value">{{@model.proto}}</span>
          </div>
          <div class="detail-item">
            <span class="label">Location:</span>
            <span class="value">
              {{#if @model.latitude}}
                {{@model.latitude}}, {{@model.longitude}}
              {{else}}
                Not available
              {{/if}}
            </span>
          </div>
        </div>
      </div>

      <div class="detail-card credentials-card">
        <h3>Captured Credentials</h3>
        {{#if @model.credentials}}
          {{#if @model.credentials.length}}
            <table class="credentials-detail-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Username</th>
                  <th>Password</th>
                </tr>
              </thead>
              <tbody>
                {{#each @model.credentials as |credential|}}
                  <tr>
                    <td>{{credential.id}}</td>
                    <td><span class="username">{{credential.username}}</span></td>
                    <td><span class="password">{{credential.password}}</span></td>
                  </tr>
                {{/each}}
              </tbody>
            </table>
          {{else}}
            <p class="no-credentials">No credentials captured for this connection.</p>
          {{/if}}
        {{else}}
          <p class="no-credentials">No credentials captured for this connection.</p>
        {{/if}}
      </div>

      <div class="detail-card data-card">
        <h3>Payload Data</h3>
        {{#if @model.data}}
          {{#if @model.data.length}}
            <div class="data-entries">
              {{#each @model.data as |dataEntry|}}
                <div class="data-entry">
                  <div class="data-header">
                    <span class="data-direction {{dataEntry.direction}}">
                      {{#if (eq dataEntry.direction "inbound")}}
                        Inbound
                      {{else}}
                        Outbound
                      {{/if}}
                    </span>
                    <span class="data-id">ID: {{dataEntry.id}}</span>
                  </div>
                  <pre class="data-content">{{dataEntry.data}}</pre>
                </div>
              {{/each}}
            </div>
          {{else}}
            <p class="no-data">No payload data captured for this connection.</p>
          {{/if}}
        {{else}}
          <p class="no-data">No payload data captured for this connection.</p>
        {{/if}}
      </div>
    </div>
  {{else}}
    <div class="error-message">
      <h2>Connection Not Found</h2>
      <p>The connection you're looking for doesn't exist or couldn't be loaded.</p>
      <LinkTo @route="connections" class="back-link">← Back to Connections</LinkTo>
    </div>
  {{/if}}
</div>
